"use strict";(self.webpackChunknote_protocol=self.webpackChunknote_protocol||[]).push([[8867],{8334:(t,n,e)=>{e.r(n),e.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>l});var o=e(6070),i=e(5710);const r={title:"",sidebar_position:4.6,sidebar_label:"\u94fe\u4e0b\u667a\u80fd\u5408\u7ea6"},c=void 0,s={id:"protocol/Token/4.6-OffchainContracts",title:"",description:"4.6 \u94fe\u4e0b\u667a\u80fd\u5408\u7ea6",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/protocol/04-Token/4.6-OffchainContracts.md",sourceDirName:"protocol/04-Token",slug:"/protocol/Token/4.6-OffchainContracts",permalink:"/zh/docs/protocol/Token/4.6-OffchainContracts",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4.6,frontMatter:{title:"",sidebar_position:4.6,sidebar_label:"\u94fe\u4e0b\u667a\u80fd\u5408\u7ea6"},sidebar:"docsSidebar",previous:{title:"\u5176\u4ed6",permalink:"/zh/docs/protocol/Token/4.5-Others"},next:{title:"\u6570\u636e\u5b58\u50a8",permalink:"/zh/docs/protocol/Token/4.7-Data"}},a={},l=[{value:"4.6 \u94fe\u4e0b\u667a\u80fd\u5408\u7ea6",id:"46-\u94fe\u4e0b\u667a\u80fd\u5408\u7ea6",level:2}];function p(t){const n={code:"code",h2:"h2",p:"p",pre:"pre",...(0,i.R)(),...t.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"46-\u94fe\u4e0b\u667a\u80fd\u5408\u7ea6",children:"4.6 \u94fe\u4e0b\u667a\u80fd\u5408\u7ea6"}),"\n",(0,o.jsx)(n.p,{children:"\u667a\u80fd\u5408\u7ea6\u4f7f\u7528sCrypt\u63d0\u4f9b\u7684\u6bd4\u7279\u5e01\u667a\u80fd\u5408\u7ea6\u9ad8\u7ea7\u8bed\u8a00\uff0c\u4ee5\u4fdd\u8bc1\u7d22\u5f15\u9a8c\u8bc1\u5668\u5668\u5728\u6709\u9650\u7684\u65f6\u95f4\u5185\u6267\u884c\u5b8c\u6bd5\u3002\u540c\u65f6\u53ef\u4ee5\u652f\u6301\u5305\u62ecSwap\uff0cOracle\u548c\u96f6\u77e5\u8bc6\u8bc1\u660e\u7b49\u7b49\u9ad8\u7ea7\u7528\u4f8b\u3002"}),"\n",(0,o.jsx)(n.p,{children:"\u4e00\u4e2a\u7b80\u5355\u7684\u94fe\u4e0b\u5408\u7ea6\u7528\u4f8b\u5982\u4e0b\uff1a"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"export class N20_Sample extends SmartContract {\n    @prop()\n    readonly tick: ByteString\n\n    @prop()\n    readonly max: bigint\n\n    @prop()\n    readonly lim: bigint\n\n    @prop()\n    readonly dec: bigint\n\n    constructor(tick: ByteString, max: bigint, lim: bigint, dec: bigint) {\n        super(...arguments)\n        this.tick = tick\n        this.max = max\n        this.lim = lim\n        this.dec = dec\n    }\n\n    @method()\n    public check(\n        bh: BlockHeader,\n        merkleproof: MerkleProof,\n        tx: ByteString,\n        prevTx: ByteString\n    ) {\n        // verify transaction in the block\n        const txid = hash256(tx)\n        assert(Blockchain.txInBlock(txid, bh, merkleproof))\n    }\n\n    @method()\n    public mint(tick: ByteString, amt: bigint) {\n        assert(tick == this.tick, 'Tick does not match')\n        assert(amt <= this.lim, 'Amount check failed')\n    }\n\n    @method()\n    public transfer(tick: ByteString, amt: bigint) {\n        assert(tick == this.tick, 'Tick does not match')\n        assert(amt <= this.lim, 'Amount check failed')\n    }\n}\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u8fd9\u6bb5\u4ee3\u7801\u4e2d\u7684check\u51fd\u6570\u9a8c\u8bc1\u4e86\u6bd4\u7279\u5e01\u4ea4\u6613\u662f\u5426\u5728\u533a\u5757\u4e2d\u3002mint\u548ctransfer\u51fd\u6570\u9a8c\u8bc1\u4e86N20\u7684\u4e24\u4e2aaction\u662f\u5426\u53ef\u4ee5\u6267\u884c\u3002\u53ea\u6709\u7ecf\u8fc7\u5408\u7ea6\u9a8c\u8bc1\uff0c\u7d22\u5f15\u5668\u624d\u4f1a\u8bb0\u5f55\u8d26\u53f7\u4f59\u989d\u7684\u53d8\u5316\u3002"})]})}function d(t={}){const{wrapper:n}={...(0,i.R)(),...t.components};return n?(0,o.jsx)(n,{...t,children:(0,o.jsx)(p,{...t})}):p(t)}},5710:(t,n,e)=>{e.d(n,{R:()=>c,x:()=>s});var o=e(758);const i={},r=o.createContext(i);function c(t){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof t?t(n):{...n,...t}}),[n,t])}function s(t){let n;return n=t.disableParentContext?"function"==typeof t.components?t.components(i):t.components||i:c(t.components),o.createElement(r.Provider,{value:n},t.children)}}}]);