"use strict";(self.webpackChunknote_protocol=self.webpackChunknote_protocol||[]).push([[5156],{1370:(n,t,e)=>{e.r(t),e.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>l});var i=e(4848),o=e(8453);const r={title:"",sidebar_position:4.6,sidebar_label:"\u94fe\u4e0b\u667a\u80fd\u5408\u7ea6"},c=void 0,s={id:"Token/4.6-OffchainContracts",title:"",description:"4.6 \u94fe\u4e0b\u667a\u80fd\u5408\u7ea6",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/04-Token/4.6-OffchainContracts.md",sourceDirName:"04-Token",slug:"/Token/4.6-OffchainContracts",permalink:"/zh/docs/Token/4.6-OffchainContracts",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4.6,frontMatter:{title:"",sidebar_position:4.6,sidebar_label:"\u94fe\u4e0b\u667a\u80fd\u5408\u7ea6"},sidebar:"docsSidebar",previous:{title:"\u5176\u4ed6",permalink:"/zh/docs/Token/4.5-Others"},next:{title:"\u6570\u636e\u5b58\u50a8",permalink:"/zh/docs/Token/4.7-Data"}},a={},l=[{value:"4.6 \u94fe\u4e0b\u667a\u80fd\u5408\u7ea6",id:"46-\u94fe\u4e0b\u667a\u80fd\u5408\u7ea6",level:2}];function d(n){const t={code:"code",h2:"h2",p:"p",pre:"pre",...(0,o.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h2,{id:"46-\u94fe\u4e0b\u667a\u80fd\u5408\u7ea6",children:"4.6 \u94fe\u4e0b\u667a\u80fd\u5408\u7ea6"}),"\n",(0,i.jsx)(t.p,{children:"\u667a\u80fd\u5408\u7ea6\u4f7f\u7528sCrypt\u63d0\u4f9b\u7684\u6bd4\u7279\u5e01\u667a\u80fd\u5408\u7ea6\u9ad8\u7ea7\u8bed\u8a00\uff0c\u4ee5\u4fdd\u8bc1\u7d22\u5f15\u9a8c\u8bc1\u5668\u5668\u5728\u6709\u9650\u7684\u65f6\u95f4\u5185\u6267\u884c\u5b8c\u6bd5\u3002\u540c\u65f6\u53ef\u4ee5\u652f\u6301\u5305\u62ecSwap\uff0cOracle\u548c\u96f6\u77e5\u8bc6\u8bc1\u660e\u7b49\u7b49\u9ad8\u7ea7\u7528\u4f8b\u3002"}),"\n",(0,i.jsx)(t.p,{children:"\u4e00\u4e2a\u7b80\u5355\u7684\u94fe\u4e0b\u5408\u7ea6\u7528\u4f8b\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:"export class N20_Sample extends SmartContract {\n    @prop()\n    readonly tick: ByteString\n\n    @prop()\n    readonly max: bigint\n\n    @prop()\n    readonly lim: bigint\n\n    @prop()\n    readonly dec: bigint\n\n    constructor(tick: ByteString, max: bigint, lim: bigint, dec: bigint) {\n        super(...arguments)\n        this.tick = tick\n        this.max = max\n        this.lim = lim\n        this.dec = dec\n    }\n\n    @method()\n    public check(\n        bh: BlockHeader,\n        merkleproof: MerkleProof,\n        tx: ByteString,\n        prevTx: ByteString\n    ) {\n        // verify transaction in the block\n        const txid = hash256(tx)\n        assert(Blockchain.txInBlock(txid, bh, merkleproof))\n    }\n\n    @method()\n    public mint(tick: ByteString, amt: bigint) {\n        assert(tick == this.tick, 'Tick does not match')\n        assert(amt <= this.lim, 'Amount check failed')\n    }\n\n    @method()\n    public transfer(tick: ByteString, amt: bigint) {\n        assert(tick == this.tick, 'Tick does not match')\n        assert(amt <= this.lim, 'Amount check failed')\n    }\n}\n"})}),"\n",(0,i.jsx)(t.p,{children:"\u8fd9\u6bb5\u4ee3\u7801\u4e2d\u7684check\u51fd\u6570\u9a8c\u8bc1\u4e86\u6bd4\u7279\u5e01\u4ea4\u6613\u662f\u5426\u5728\u533a\u5757\u4e2d\u3002mint\u548ctransfer\u51fd\u6570\u9a8c\u8bc1\u4e86N20\u7684\u4e24\u4e2aaction\u662f\u5426\u53ef\u4ee5\u6267\u884c\u3002\u53ea\u6709\u7ecf\u8fc7\u5408\u7ea6\u9a8c\u8bc1\uff0c\u7d22\u5f15\u5668\u624d\u4f1a\u8bb0\u5f55\u8d26\u53f7\u4f59\u989d\u7684\u53d8\u5316\u3002"})]})}function p(n={}){const{wrapper:t}={...(0,o.R)(),...n.components};return t?(0,i.jsx)(t,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},8453:(n,t,e)=>{e.d(t,{R:()=>c,x:()=>s});var i=e(6540);const o={},r=i.createContext(o);function c(n){const t=i.useContext(r);return i.useMemo((function(){return"function"==typeof n?n(t):{...t,...n}}),[t,n])}function s(n){let t;return t=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:c(n.components),i.createElement(r.Provider,{value:t},n.children)}}}]);