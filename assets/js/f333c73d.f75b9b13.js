"use strict";(self.webpackChunknote_protocol=self.webpackChunknote_protocol||[]).push([[3131],{588:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"tutorial/basic","title":"Basic Concepts","description":"In the Bitcoin UTXO model, it is essential to understand the following concepts first.","source":"@site/docs/tutorial/01_basic.md","sourceDirName":"tutorial","slug":"/tutorial/basic","permalink":"/docs/tutorial/basic","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Basic Concepts","sidebar_position":1,"sidebar_label":"Basic Concepts"},"sidebar":"tutorialSidebar","previous":{"title":"User Guide","permalink":"/docs/tutorial/guide"},"next":{"title":"Quick Start","permalink":"/docs/tutorial/quick-start"}}');var i=n(6070),a=n(6599);const o={title:"Basic Concepts",sidebar_position:1,sidebar_label:"Basic Concepts"},c=void 0,r={},d=[{value:"Core Concepts of the NOTE Protocol",id:"core-concepts-of-the-note-protocol",level:2},{value:"Account",id:"account",level:3},{value:"On-chain Contracts",id:"on-chain-contracts",level:3},{value:"Account Ownership",id:"account-ownership",level:3},{value:"Digital Assets",id:"digital-assets",level:3},{value:"Operations",id:"operations",level:3}];function l(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"In the Bitcoin UTXO model, it is essential to understand the following concepts first."}),"\n",(0,i.jsx)(t.admonition,{type:"info",children:(0,i.jsx)(t.p,{children:"Some aspects differ slightly from the Ethereum account model."})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Mnemonic: A mnemonic is a set of words, usually consisting of 12 or 24 English words (other languages and other numbers of words are also possible). It can be generated through wallet software, specialized software, hardware, or even by rolling dice. Mnemonics need to be strictly safeguarded, preferably written down with paper and pen and stored physically."}),"\n",(0,i.jsx)(t.li,{children:"Wallet: A wallet can derive multiple public and private keys from a mnemonic (seed). The wallet is mainly responsible for generating and managing addresses, signing transactions, broadcasting them to the blockchain, obtaining transaction records from data providers, and displaying them to the user."}),"\n",(0,i.jsx)(t.li,{children:"Cryptocurrency: Wallets manage multiple blockchains, including BTC/BCH/BSV/RXD, and their corresponding cryptocurrencies according to standards such as BIP44. Each blockchain (cryptocurrency) can have both a mainnet and a testnet."}),"\n",(0,i.jsx)(t.li,{children:"Address: Each time a wallet generates a set of public and private keys, it can generate various formats of addresses according to templates. Common formats include P2PKH, P2WPKH, P2WSH, and P2TR. The NOTE protocol has two default templates, P2TR-NOTE and P2TR-COMMIT-NOTE."}),"\n",(0,i.jsx)(t.li,{children:"Multiple Addresses: A wallet can generate multiple sets of public and private keys, and thus multiple addresses. There is generally no limit to the number of addresses that can be generated."}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Image0",src:n(3871).A+"",width:"2404",height:"2042"})}),"\n",(0,i.jsx)(t.admonition,{type:"info",children:(0,i.jsx)(t.p,{children:"Blockchains with account models like Ethereum do not differentiate between mainnet and testnet. Each account corresponding to a set of public and private keys has a fixed address. In the Bitcoin UTXO model, there is no concept of an account. Each set of public and private keys can generate multiple addresses according to templates. All these addresses, although different in form, are controlled by the private key."})}),"\n",(0,i.jsx)(t.h2,{id:"core-concepts-of-the-note-protocol",children:"Core Concepts of the NOTE Protocol"}),"\n",(0,i.jsx)(t.h3,{id:"account",children:"Account"}),"\n",(0,i.jsx)(t.p,{children:"In Bitcoin, there is no concept of an account, only addresses. Each address is constructed from a transaction output template, and an address is essentially an encoding of the transaction output script."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Image1",src:n(6152).A+"",width:"1098",height:"932"})}),"\n",(0,i.jsxs)(t.p,{children:["In the NOTE protocol, we define the hash value of a transaction output script as an account. This definition is derived from the ",(0,i.jsx)(t.a,{href:"https://electrumx.readthedocs.io/en/latest/protocol-basics.html?highlight=script%20hash#script-hashes",children:"Electrum protocol"}),"."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.code,{children:"scriptHash = sha256(script).reverse()"})}),"\n",(0,i.jsx)(t.p,{children:"In summary, an account is the hash value of a transaction output, with a fixed length of 256 bits (32 bytes), and a hex string length of 64. An address is the encoding of a transaction output, with its length varying depending on the script content and encoding rules. An address can be converted to an account, but an account cannot be converted back to an address."}),"\n",(0,i.jsx)(t.h3,{id:"on-chain-contracts",children:"On-chain Contracts"}),"\n",(0,i.jsxs)(t.p,{children:["In the NOTE protocol, digital asset accounts are constructed using special script templates, different from standard P2PKH, P2WSH, and P2TR addresses. They are defined using Taproot Script in BTC. The simplest script is ",(0,i.jsx)(t.code,{children:"NOTE OP_2DROP OP_2DROP OP_2DROP Pubkey OP_CHECKSIG"}),"."]}),"\n",(0,i.jsx)(t.p,{children:'More complex script templates can also be used, such as multisig. These scripts are collectively referred to as "on-chain contracts." We can write simple on-chain contracts using Bitcoin Script opcodes (OpCode), or more complex on-chain contracts using the sCrypt language.'}),"\n",(0,i.jsx)(t.h3,{id:"account-ownership",children:"Account Ownership"}),"\n",(0,i.jsx)(t.p,{children:"The ownership of an account belongs to the holder(s) of one or more private keys that can unlock the transaction output. In common Bitcoin transactions, a single private key holder gains ownership by providing the unlocking script for the UTXO, which is then verified by miners. Similarly, if it is a multisig address, ownership is obtained after multiple private key holders jointly sign the transaction."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Image2",src:n(3011).A+"",width:"1270",height:"604"})}),"\n",(0,i.jsx)(t.h3,{id:"digital-assets",children:"Digital Assets"}),"\n",(0,i.jsx)(t.p,{children:"Digital assets are defined by the protocol and include N20 Tokens, N721 NFTs, etc. These digital assets are bound to transaction outputs. Unlike colored coins, this binding does not depend on the number of satoshis in the transaction output but is instead related to the UTXO itself."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Image3",src:n(5258).A+"",width:"1076",height:"724"})}),"\n",(0,i.jsx)(t.h3,{id:"operations",children:"Operations"}),"\n",(0,i.jsx)(t.p,{children:"Operations refer to actions such as minting, transferring, burning, etc., as defined by the protocol, to be performed on digital assets. These operations are defined by a set of key-value pairs encoded in msgpack, which we call Payload, and placed in the unlocking script. This means that if the account owner needs to operate on digital assets, they must first unlock the account UTXO by signing. This process is essentially the Bitcoin transaction process, executing on-chain contracts, with security ensured by Bitcoin's mining mechanism."}),"\n",(0,i.jsx)(t.p,{children:"For example, a Payload instance:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:'{\n  "p": "n20",\n  "op": "transfer",\n  "tick": "NOTE",\n  "amt": 100\n}\n'})}),"\n",(0,i.jsx)(t.p,{children:"It indicates unlocking the UTXO and transferring the digital asset named NOTE bound in the UTXO to the first transaction output. If the digital asset in the UTXO exceeds 100, the balance will be transferred to the second transaction output."}),"\n",(0,i.jsx)(t.p,{children:"Once the transaction is published on the blockchain, it means the on-chain contract execution has succeeded, and ownership has been confirmed. The NOTE protocol indexer retrieves this transaction from the blockchain, interprets the Payload in the unlocking script, checks whether the Payload is valid, and if the unlocked UTXO contains a sufficient amount of tokens. It then executes the off-chain smart contract, invoking the method behind the tick name in the smart contract, with the method name being the value of op, such as transfer. Once the contract executes successfully, the corresponding amount of digital assets will be bound to the transaction output."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Image4",src:n(9029).A+"",width:"1912",height:"1568"})})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},3871:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/01_basic_image0_en-966e0228f8e27ac683782e3896e92c7a.png"},6152:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/01_basic_image1-2bd1e943023e90441c2eedbc4d012111.png"},3011:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/01_basic_image2-879f8bc23d3d84e44d5f39e942be3fca.png"},5258:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/01_basic_image3-c91bf2ac6b7576e963eb1b2638348bd9.png"},9029:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/01_basic_image4-456010a40dc297be041af4ebf8951c23.png"},6599:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>c});var s=n(758);const i={},a=s.createContext(i);function o(e){const t=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);